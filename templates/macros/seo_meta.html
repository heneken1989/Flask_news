{#
Macro để render SEO meta tags
Usage: {% from 'macros/seo_meta.html' import render_seo_meta %}
       {{ render_seo_meta(seo_meta) }}
#}

{% macro render_seo_meta(seo_meta) %}
    {# Basic meta tags #}
    <title>{{ seo_meta.title }}</title>
    <meta name="title" content="{{ seo_meta.title }}">
    <meta name="description" content="{{ seo_meta.description }}">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    
    {# Canonical URL #}
    <link rel="canonical" href="{{ seo_meta.url }}">
    
    {# Open Graph tags #}
    <meta property="og:type" content="{{ seo_meta.type }}">
    <meta property="og:title" content="{{ seo_meta.title }}">
    <meta property="og:description" content="{{ seo_meta.description }}">
    <meta property="og:image" content="{{ seo_meta.image }}">
    <meta property="og:url" content="{{ seo_meta.url }}">
    <meta property="og:locale" content="{{ seo_meta.locale }}">
    
    {# Twitter Card tags #}
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ seo_meta.title }}">
    <meta name="twitter:description" content="{{ seo_meta.description }}">
    <meta name="twitter:image" content="{{ seo_meta.image }}">
    
    {# Article-specific meta tags #}
    {% if seo_meta.type == 'article' %}
        {% if seo_meta.published_time %}
            <meta property="article:published_time" content="{{ seo_meta.published_time }}">
        {% endif %}
        {% if seo_meta.modified_time %}
            <meta property="article:modified_time" content="{{ seo_meta.modified_time }}">
        {% endif %}
        {% if seo_meta.author %}
            <meta property="article:author" content="{{ seo_meta.author }}">
        {% endif %}
        {% if seo_meta.section %}
            <meta property="article:section" content="{{ seo_meta.section }}">
        {% endif %}
        {% if seo_meta.tags %}
            {% for tag in seo_meta.tags %}
                <meta property="article:tag" content="{{ tag }}">
            {% endfor %}
        {% endif %}
    {% endif %}
    
    {# Hreflang tags for multilingual #}
    {% if seo_meta.hreflang_urls %}
        {% for lang, url in seo_meta.hreflang_urls.items() %}
            <link rel="alternate" hreflang="{{ lang }}" href="{{ url }}">
        {% endfor %}
        {# Default hreflang #}
        <link rel="alternate" hreflang="x-default" href="{{ seo_meta.url }}">
    {% endif %}
    
    {# Note: HTML lang attribute should be set in base.html, not here #}
{% endmacro %}


{% macro render_structured_data(structured_data) %}
    {# JSON-LD structured data - structured_data là list #}
    {% if structured_data %}
        <script type="application/ld+json">
        {{ structured_data | tojson(indent=2) | safe }}
        </script>
    {% endif %}
{% endmacro %}

